class Notification{constructor(){this.params=new URLSearchParams(window.location.search)}getFlag(){return this.params.get("flag")}checkFlagAndShowNotification(){1==this.getFlag()&&($.notify("Logged-In Successfully","success"),this.params.set("flag",0),history.replaceState(null,null,"?"+this.params.toString()))}}class CopyLinkAndShowProfileOption{constructor(){this.copyButton=$(".generateLinkButton"),this.linkContent=$(".link_box>input"),this.info=$("#info"),this.profileImage=$(".profile>img")}copyLink(){(self=this).copyButton.click(function(){self.linkContent.select(),navigator.clipboard.writeText(self.linkContent.val()),"Copy"===self.copyButton.text()&&$.notify("Link Copied","success")})}showProfileOption(){self=this;let t;this.profileImage.mouseover(function(){self.info.removeClass("infoDisplay")}),this.info.mouseover(function(e){t=e.clientX,self.info.removeClass("infoDisplay")}),this.profileImage.mouseout(function(){setTimeout(()=>{t||self.info.addClass("infoDisplay")},2e3)}),this.info.mouseout(function(e){self.info.addClass("infoDisplay")})}logout(){$("#logout").click(function(){$.removeCookie("token",{path:"/"}),$.removeCookie("ref_token",{path:"/"}),location.replace("/users/login?flag=2")})}}function getLinkFromServer(){const e=$(".generateLinkButton");e.click(async function(){try{getlink("http://localhost:3000"+(await axios.get("/api/v1/generate/link",{baseURL:"http://localhost:8000/",headers:{authorization:"Bearer "+$.cookie("token")}})).data.data.Url)}catch(e){var t;if(e.response&&401===e.response.status&&"TokenExpiredError"===e.response.data.message)return t=await axios.post("/api/v1/users/refresh",{token:$.cookie("ref_token")},{baseURL:"http://localhost:8000/"}),$.cookie("token",t.data.data.access_token,{path:"/"}),$.cookie("ref_token",t.data.data.refresh_token,{path:"/"}),void getlink((await axios.get("/api/v1/generate/link",{baseURL:"http://localhost:8000/",headers:{authorization:"Bearer "+$.cookie("token")}})).data.data.Url);if(e.response)return void $.notify(e.response.data.message,"error");$.notify(e,"error")}})}function getlink(e){const t=$(".invites"),o=$(".join"),i=$(".link_box>input"),a=$(".generateLinkButton");i.val(e),"Create"===a.text()&&$.notify("Link Generated","success"),a.text("Copy"),o.html(`<a href="${e}" target="_blank"><span><i class="fa fa-users"></i></span> Join</a>`),t.html('</span><a href="mailto:"><span><i class="fa fa-share-alt"></i> Invite Friend</a>')}getLinkFromServer();