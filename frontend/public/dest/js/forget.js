class ResetPassword{constructor(){this.emailElement=$("#email"),this.submitElement=$("#submit"),this.emailSendContainerElement=$("#emailSendContainer"),this.otpContainerElement=$("#otpContainer"),this.OTPElement=$("#otp"),this.sendElement=$("#send"),this.email,this.otp}sendMailToResetPassword(){(self=this).submitElement.click(async function(){try{var e=self.updateData();if(!e.email)return void $.notify("Email is required",{className:"warn",elementPosition:"top right"});await self.saveIntoDB(e),$.notify("Check Your Email","success"),self.emailSendContainerElement.addClass("hidden"),self.otpContainerElement.removeClass("hidden"),self.CheckOTP()}catch(e){if(e.response&&400===e.response.status)return void $.notify(e.response.data.message,{className:"warn",postion:"top"});$.notify(e,{className:"warn",postion:"top"})}})}updateData(){return this.email=this.emailElement.val(),{email:this.email}}saveIntoDB(a){return new Promise((e,t)=>{var s=axios.post("/api/v1/forget/mail",a,{baseURL:"http://localhost:8000/"});e(s),t(s)})}CheckOTP(){(self=this).sendElement.click(async function(e){e.preventDefault();try{var t=self.updateOTP();if(""===t.OTP)return void $.notify("Wrong OTP","warn");var s=await self.saveIntoDB2(t);location.assign("/users/set/"+s.data.code)}catch(e){if(e.response&&400===e.response.status)return void $.notify(e.response.data.message,"warn");if(e.response&&500===e.response.status)return void $.notify(e.response.data.message,"error");$.notify(e,"error")}})}updateOTP(){return this.otp=this.OTPElement.val(),{OTP:this.otp,email:this.emailElement.val()}}saveIntoDB2(a){return new Promise((e,t)=>{var s=axios.post("/api/v1/forget/otp",{OTP:a.OTP,email:a.email},{baseURL:"http://localhost:8000/"});e(s),t(s)})}}